{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <h1>ğŸ“Š Panel de Control MelodyUnmix</h1>

  <!-- Tabs -->
  <ul class="nav nav-tabs mt-4" id="dashboardTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#postgres" type="button">Postgres</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" data-bs-toggle="tab" data-bs-target="#mongodb" type="button">MongoDB</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" data-bs-toggle="tab" data-bs-target="#logs" type="button">Logs</button>
    </li>
  </ul>

  <div class="tab-content mt-3">
    <!-- Postgres -->
    <div class="tab-pane fade show active" id="postgres">
      <h3>ğŸµ Audios Subidos</h3>
      <ul class="list-group mb-4">
        {% for audio in postgres.audios %}
          <li class="list-group-item">{{ audio.nombre_audio }} - {{ audio.fecha_procesamiento }}</li>
        {% empty %}
          <li class="list-group-item">No hay audios</li>
        {% endfor %}
      </ul>

      <h3>ğŸ¶ Pistas Separadas</h3>
      <ul class="list-group mb-4">
        {% for pista in postgres.pistas %}
          <li class="list-group-item">{{ pista.nombre_pista }} - {{ pista.fecha_creacion }}</li>
        {% empty %}
          <li class="list-group-item">No hay pistas</li>
        {% endfor %}
      </ul>

      <h3>ğŸ‘¤ Usuarios en PostgreSQL</h3>
      <ul class="list-group mb-4">
        {% for usuario in postgres.usuarios %}
          <li class="list-group-item">
            {{ usuario.username }} - {{ usuario.email }} - {{ usuario.fecha_registro }}
          </li>
        {% empty %}
          <li class="list-group-item">No hay usuarios en PostgreSQL</li>
        {% endfor %}
      </ul>

      <h3>ğŸ“ Logs en PostgreSQL</h3>
      <ul class="list-group mb-4">
        {% for log in postgres.logs %}
          <li class="list-group-item">{{ log.descripcion_log }} - {{ log.fecha }}</li>
        {% empty %}
          <li class="list-group-item">No hay logs en PostgreSQL</li>
        {% endfor %}
      </ul>
    </div>

    <!-- MongoDB -->
    <div class="tab-pane fade" id="mongodb">
      <h3>ğŸ—„ï¸ Pistas en MongoDB</h3>
      <ul class="list-group mb-4">
        {% for pista in mongo.pistas %}
          <li class="list-group-item">
            {{ pista.instrumento }} - {{ pista.url_archivo }} - {{ pista.fecha }}
          </li>
        {% empty %}
          <li class="list-group-item">No hay pistas en MongoDB</li>
        {% endfor %}
      </ul>

      <h3>ğŸ“‚ Logs de MongoDB</h3>
      <ul class="list-group mb-4">
        {% for log in mongo.logs %}
          <li class="list-group-item">{{ log.event }} - {{ log.timestamp }}</li>
        {% empty %}
          <li class="list-group-item">No hay logs en MongoDB</li>
        {% endfor %}
      </ul>
    </div>

    <!-- Logs locales -->
    <div class="tab-pane fade" id="logs">
      <h3>ğŸ“œ Ãšltimos logs del archivo spleeter.log</h3>
      <pre style="background:#222; color:#eee; padding:10px; border-radius:5px; max-height:300px; overflow-y:auto;">
{% for line in file_logs %}
{{ line }}
{% endfor %}
      </pre>
    </div>
  </div>
</div>
{% endblock %}
